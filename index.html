<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- BS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css">
    <!-- BS ICONS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <!-- CSS -->
    <link rel="stylesheet" href="./css/style.css">
    <!-- VUE -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- JS -->
    <script src="./js/contacts.js"></script>
    <script src="./js/script.js" defer></script>
    <title>BoolzApp</title>
</head>

<body>
    <div class="wrapper">
        <div class="whatsapp d-flex" id="app">
            <div class="sidebar d-flex flex-column">
                <div class="user__lobby d-flex justify-content-between p-2">
                    <div class="personal__info">
                        <div class="personal__info__image">
                            <img :src="contacts[0].avatar" alt="">
                        </div>
                        <div class="personal__info__name mx-2">
                            <h4>Stefano</h4>
                        </div>
                    </div>
                    <div class="user__icons py-2">
                        <i class="bi bi-circle"></i>
                        <i class="bi bi-chat-right"></i>
                        <i class="bi bi-three-dots-vertical"></i>
                    </div>
                </div>
                <div class="desktop__notifications d-flex">
                    <div class="icon__container p-3">
                        <i class="bi bi-bell-slash notification__bell"></i>
                    </div>
                    <div class="notification__container p-3 d-flex flex-column">
                        <span>Ricevi notifiche di nuovi messaggi</span>
                        <a class="notification__link">Attiva notifiche desktop</a>
                    </div>
                </div>
                <div class="contact-search p-1">
                    <div class="input-group">
                        <span class="input-group-text" id="basic-addon1"><i class="bi bi-search"></i></span>
                        <input type="text" class="form-control" aria-describedby="basic-addon1">
                    </div>
                </div>
                <div class="global__chat__container">
                    <ul>
                        <li 
                        v-for="(contact, index) in contacts" 
                        @click="activeUser = index"
                        class="contact__list">
                            <div class="contact__img__container">
                                <img :src=contact.avatar alt="">
                            </div>
                            <div class="contact__msg__info">
                                {{ contact.name }} 
                                <span class="last__message">Ultimo messaggio</span>
                            </div>
                            <div class="time__stamp">
                                <span>12:00</span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="chat-wrapper">
                <div class="contact__info d-flex">
                    <div class="user__contact__container d-flex px-2">
                        <div class="user__contact__img">
                            <img :src="contacts[activeUser].avatar"></img>
                        </div>
                        <div class="user__contact__name d-flex flex-column mx-2 ">
                            <strong><span> {{ contacts[activeUser].name }}</span></strong>
                            <span class="mb-1">Ultimo accesso oggi alle 12:00</span>
                        </div>
                    </div>
                    <div class="user__contact__icons px-3">
                        <i class="bi bi-search"></i>
                        <i class="bi bi-paperclip"></i>
                        <i class="bi bi-three-dots-vertical"></i>
                    </div>
                </div>

                <div class="chat__field">
                    <div class="messages">
                        <div 
                        v-for="(message, status) in contacts[activeUser].messages" 
                        :class="(message.status == 'sent')  ?  'message sent' : 'message received' "
                        >
                        {{ message.message }}
                    <span class="message__date">{{message.date}}</span>
                    </div>
                    </div>
                </div>

                <div class="bottom__bar__inputs d-flex justify-content-between align-items-center ">
                    <i class="bi bi-emoji-smile"></i>
                    <div class="input-group w-75">
                        <input v-model.trim="newMessage.message"
                        @keyup.enter="addMesssage()"
                        type="text" class="form-control" placeholder="Scrivi un messaggio"
                            aria-label="Scrivi un messaggio" aria-describedby="basic-addon2">
                        <div class="input-group-append">
                            <button @click="addMesssage()" class="btn btn-outline-secondary" type="button">Invia</button>
                        </div>
                    </div>
                    <i class="bi bi-mic-fill"></i>
                </div>
            </div>
        </div>
    </div>
</body>

</html>